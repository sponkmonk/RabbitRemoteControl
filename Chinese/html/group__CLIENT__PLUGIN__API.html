<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>玉兔远程控制: 客户端插件接口</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="app.ico"/></td>
  <td id="projectalign">
   <div id="projectname">玉兔远程控制<span id="projectnumber">&#160;v0.0.26</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">类</a>  </div>
  <div class="headertitle"><div class="title">客户端插件接口<div class="ingroups"><a class="el" href="group__LIBAPI.html">库</a> &raquo; <a class="el" href="group__LIBAPI__CLIENT.html">客户端库</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>客户端插件接口.  
<a href="#details">更多...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
类</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCConnect.html">CConnect</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">具体连接接口。它由协议插件实现。 它默认启动一个定时器来开启一个非 Qt 事件循环（就是普通的循环处理）。 详见： <a class="el" href="classCConnect.html#ad4044f80dafaf48c3073f6a5c789331d" title="默认开始定时器">Connect()</a>、 <a class="el" href="classCConnect.html#ab2ff23a9381d3a5f06607e3ca1c209a3" title="一个非 Qt 事件处理，它调用 OnProcess()，并根据其返回值开始新的定时器。 如果 CConnect 没有一个非 Qt 事件循环（就是普通的循环处理），必须重载它。 参见 CConnectTi...">slotTimeOut()</a>、 <a class="el" href="classCConnect.html#a83e76dd5bde63fb7ab40797c41d5bea4" title="插件连接的具体操作处理">OnProcess()</a> 。 当然，它仍然支持 Qt 事件（QObject 的 信号 － 槽 机制）。  <a href="classCConnect.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCConnecter.html">CConnecter</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">描述连接者应用接口。  <a href="classCConnecter.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCFrmViewer.html">CFrmViewer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">用于显示从 <a class="el" href="classCConnect.html" title="具体连接接口。它由协议插件实现。 它默认启动一个定时器来开启一个非 Qt 事件循环（就是普通的循环处理）。 详见： Connect()、 slotTimeOut()、 OnProcess() 。 当然，...">CConnect</a> 输出的图像，和向 <a class="el" href="classCConnect.html" title="具体连接接口。它由协议插件实现。 它默认启动一个定时器来开启一个非 Qt 事件循环（就是普通的循环处理）。 详见： Connect()、 slotTimeOut()、 OnProcess() 。 当然，...">CConnect</a> 发送键盘、鼠标事件。  <a href="classCFrmViewer.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCParameter.html">CParameter</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">参数接口类  <a href="classCParameter.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPluginClient.html">CPluginClient</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">客户端插件接口。建立 <a class="el" href="classCConnecter.html" title="描述连接者应用接口。">CConnecter</a> 实例，它由协议插件实现。 可以与 <a class="el" href="classCConnecterDesktopThread.html" title="它默认启动一个后台线程。实现一个远程桌面后台线程处理一个远程桌面连接。 可与插件接口从 CPluginClient 派生的插件一起使用，用于连接是阻塞模型的。">CConnecterDesktopThread</a> 一起使用，用于连接是阻塞模型的。  <a href="classCPluginClient.html#details">更多...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<p >客户端插件接口. </p>
<ul>
<li>线程模型：<ul>
<li>阻塞：大多数控制协议实现库连接都是阻塞的。所以需要一个线程处理一个连接。 <dl class="section see"><dt>参见</dt><dd><a class="el" href="classCPluginClient.html" title="客户端插件接口。建立 CConnecter 实例，它由协议插件实现。 可以与 CConnecterDesktopThread 一起使用，用于连接是阻塞模型的。">CPluginClient</a> <a class="el" href="classCConnecterDesktopThread.html" title="它默认启动一个后台线程。实现一个远程桌面后台线程处理一个远程桌面连接。 可与插件接口从 CPluginClient 派生的插件一起使用，用于连接是阻塞模型的。">CConnecterDesktopThread</a></dd></dl>
</li>
<li>非阻塞：例如Qt事件。一个线程可以处理多个连接。 <dl class="section see"><dt>参见</dt><dd><a class="el" href="classCPluginClientThread.html" title="它默认启动一个后台线程。 它与 CConnecterDesktop 一起可实现一个后台线程处理多个远程桌面连接。">CPluginClientThread</a> <a class="el" href="classCConnecterDesktop.html" title="它仅实现 Qt 事件(非阻塞)">CConnecterDesktop</a></dd></dl>
</li>
</ul>
</li>
<li>类关系： <div class="image">
<object type="image/svg+xml" data="PluginClientAPI.svg" style="pointer-events: none;"></object>
</div>
</li>
<li>序列图： <div class="image">
<object type="image/svg+xml" data="PluginClientSequenceDiagram.svg" style="pointer-events: none;"></object>
</div>
</li>
<li>写一个插件：<ul>
<li>生成插件目标名称格式为： PluginClient${PROJECT_NAME} <div class="fragment"><div class="line"><span class="preprocessor"># Author: Kang Lin &lt;kl222@126.com&gt;</span></div>
<div class="line"> </div>
<div class="line">project(FreeRDP)</div>
<div class="line"> </div>
<div class="line">SET(FreeRDP_LIBS freerdp-client freerdp Client)</div>
<div class="line"><span class="keywordflow">if</span>(NOT WIN32)</div>
<div class="line">    LIST(APPEND FreeRDP_LIBS winpr)</div>
<div class="line">    install_targets(TARGETS ${FreeRDP_LIBS})</div>
<div class="line">endif()</div>
<div class="line"> </div>
<div class="line">SET(FreeRDP_SOURCE_FILES</div>
<div class="line">    ParameterFreeRDP.cpp</div>
<div class="line">    PluginFreeRDP.cpp</div>
<div class="line">    ConnectFreeRDP.cpp</div>
<div class="line">    ConnecterFreeRDP.cpp</div>
<div class="line">    DlgSetFreeRDP.cpp</div>
<div class="line">    ConvertKeyCode.cpp</div>
<div class="line">    CursorFreeRDP.cpp</div>
<div class="line">    ClipboardFreeRDP.cpp</div>
<div class="line">    ClipboardMimeData.cpp</div>
<div class="line">    DlgGetUserPasswordFreeRDP.cpp</div>
<div class="line">    )</div>
<div class="line"> </div>
<div class="line">SET(FreeRDP_HEADER_FILES</div>
<div class="line">    ParameterFreeRDP.h</div>
<div class="line">    PluginFreeRDP.h</div>
<div class="line">    ConnectFreeRDP.h</div>
<div class="line">    ConnecterFreeRDP.h</div>
<div class="line">    DlgSetFreeRDP.h</div>
<div class="line">    ConvertKeyCode.h</div>
<div class="line">    CursorFreeRDP.h</div>
<div class="line">    ClipboardFreeRDP.h</div>
<div class="line">    ClipboardMimeData.h</div>
<div class="line">    DlgGetUserPasswordFreeRDP.h</div>
<div class="line">    )</div>
<div class="line"> </div>
<div class="line">SET(FreeRDP_UI_FILES</div>
<div class="line">    DlgSetFreeRDP.ui</div>
<div class="line">    DlgGetUserPasswordFreeRDP.ui</div>
<div class="line">    )</div>
<div class="line"> </div>
<div class="line">if(MINGW)</div>
<div class="line">    set(FreeRDP_OPTIONS -fpermissive)</div>
<div class="line">endif()</div>
<div class="line"> </div>
<div class="line">set(FreeRDP_QT_COMPONENTS Widgets Multimedia PrintSupport SerialPort)</div>
<div class="line">find_package(Qt${QT_VERSION_MAJOR} REQUIRED COMPONENTS ${FreeRDP_QT_COMPONENTS})</div>
<div class="line"><span class="keywordflow">if</span>(Qt${QT_VERSION_MAJOR}_FOUND)</div>
<div class="line">    FOREACH(_COMPONENT ${FreeRDP_QT_COMPONENTS})</div>
<div class="line">        list(APPEND FreeRDP_LIBS Qt${QT_VERSION_MAJOR}::${_COMPONENT})</div>
<div class="line">    ENDFOREACH()</div>
<div class="line">endif()</div>
<div class="line">ADD_PLUGIN_TARGET(NAME PluginClient${PROJECT_NAME}</div>
<div class="line">    ISPLUGIN</div>
<div class="line">    SOURCE_FILES ${FreeRDP_SOURCE_FILES} ${FreeRDP_HEADER_FILES} ${FreeRDP_UI_FILES}</div>
<div class="line">    PRIVATE_LIBS ${FreeRDP_LIBS}</div>
<div class="line">    PRIVATE_INCLUDE_DIRS ${FreeRDP_INCLUDE_DIR} ${WinPR_INCLUDE_DIR}</div>
<div class="line">    PRIVATE_DEFINITIONS FreeRDP_VERSION_MAJOR=${FreeRDP_MAJOR} FreeRDP_VERSION_MINOR=${FreeRDP_MINOR}</div>
<div class="line">    PRIVATE_OPTIONS ${FreeRDP_OPTIONS}</div>
<div class="line">    INSTALL_DIR plugins/Client</div>
<div class="line">    OUTPUT_DIR ${CMAKE_BINARY_DIR}/plugins/Client</div>
<div class="line">    VERSION ${RabbitRemoteControl_VERSION}</div>
<div class="line">    )</div>
<div class="line"> </div>
</div><!-- fragment --></li>
<li>实现插件接口 <a class="el" href="classCPluginClient.html" title="客户端插件接口。建立 CConnecter 实例，它由协议插件实现。 可以与 CConnecterDesktopThread 一起使用，用于连接是阻塞模型的。">CPluginClient</a><ul>
<li>如果是阻塞线程模型。一个后台线程处理一个连接。连接是阻塞的。例如：FreeRDP<ul>
<li>从 <a class="el" href="classCPluginClient.html" title="客户端插件接口。建立 CConnecter 实例，它由协议插件实现。 可以与 CConnecterDesktopThread 一起使用，用于连接是阻塞模型的。">CPluginClient</a> 派生插件。例如： <a class="el" href="classCPluginFreeRDP.html">CPluginFreeRDP</a><ul>
<li>在类声明中实现Qt接口: <div class="fragment"><div class="line">    Q_INTERFACES(<a class="code hl_class" href="classCPluginClient.html">CPluginClient</a>)</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#if (QT_VERSION &gt;= QT_VERSION_CHECK(5, 0, 0))</span></div>
<div class="line">    Q_PLUGIN_METADATA(IID CPluginClient_iid)</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="ttc" id="aclassCPluginClient_html"><div class="ttname"><a href="classCPluginClient.html">CPluginClient</a></div><div class="ttdoc">客户端插件接口。建立 CConnecter 实例，它由协议插件实现。 可以与 CConnecterDesktopThread 一起使用，用于连接是阻塞模型的。</div><div class="ttdef"><b>Definition:</b> <a href="PluginClient_8h_source.html#l00027">PluginClient.h:28</a></div></div>
</div><!-- fragment --></li>
<li>在构造函数中初始化操作。例如：初始化资源等</li>
<li>在析构函数中释放资源。</li>
<li>实现属性、函数<ul>
<li>插件名：必须与工程名（翻译资源文件名[.ts]）相同。 例如： <a class="el" href="classCPluginFreeRDP.html#ab01d6296978fe8bcfcc9c656b521156e">CPluginFreeRDP::Name()</a> <div class="fragment"><div class="line"><span class="comment">// Author: Kang Lin &lt;kl222@126.com&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;PluginFreeRDP.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;QDebug&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;QApplication&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;RabbitCommonDir.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;ConnecterFreeRDP.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;winpr/wlog.h&quot;</span></div>
<div class="line"> </div>
<div class="line">Q_LOGGING_CATEGORY(FreeRDP, <span class="stringliteral">&quot;FreeRDP&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="classCPluginFreeRDP.html">CPluginFreeRDP</a>::<a class="code hl_class" href="classCPluginFreeRDP.html">CPluginFreeRDP</a>(QObject *parent)</div>
<div class="line">    : <a class="code hl_class" href="classCPluginClient.html">CPluginClient</a>(parent)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">//qDebug(FreeRDP) &lt;&lt; &quot;FreeRDP&quot; &lt;&lt; &quot;build configure:&quot; &lt;&lt; freerdp_get_build_config() &lt;&lt; &quot;\n&quot;;</span></div>
<div class="line">    qDebug(FreeRDP) &lt;&lt; <span class="stringliteral">&quot;FreeRDP version:&quot;</span> &lt;&lt; freerdp_get_version_string()</div>
<div class="line">                   &lt;&lt; <span class="stringliteral">&quot;Build version:&quot;</span> &lt;&lt; freerdp_get_build_revision();</div>
<div class="line">    <span class="comment">//WLog_SetLogLevel(WLog_GetRoot(), WLOG_TRACE);</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">CPluginFreeRDP::~CPluginFreeRDP()</div>
<div class="line">{</div>
<div class="line">    qDebug(FreeRDP) &lt;&lt; <span class="stringliteral">&quot;CPluginFreeRDP::~CPluginFreeRDP()&quot;</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> QString <a class="code hl_function" href="classCPluginFreeRDP.html#ab01d6296978fe8bcfcc9c656b521156e">CPluginFreeRDP::Name</a>()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line">    <span class="keywordflow">return</span> <span class="stringliteral">&quot;FreeRDP&quot;</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> QString <a class="code hl_function" href="classCPluginFreeRDP.html#a52fe101cacf00bf7ae21f82d6938d0f7">CPluginFreeRDP::DisplayName</a>()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line">    <span class="keywordflow">return</span> tr(<span class="stringliteral">&quot;Free remote desktop&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> QString <a class="code hl_function" href="classCPluginFreeRDP.html#abe5e7e5308d6426c453e1c6276feeb49">CPluginFreeRDP::Description</a>()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line">    <span class="keywordflow">return</span> tr(<span class="stringliteral">&quot;RDP(Windows remote desktop protol): Access remote desktops such as windows.&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> QString <a class="code hl_function" href="classCPluginFreeRDP.html#adc8f72efbc4b1281e02c1662de6f35d5">CPluginFreeRDP::Protocol</a>()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line">    <span class="keywordflow">return</span> <span class="stringliteral">&quot;RDP&quot;</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> QIcon CPluginFreeRDP::Icon()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line">    <span class="keywordflow">return</span> QIcon::fromTheme(<span class="stringliteral">&quot;windows&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="classCConnecter.html">CConnecter</a>* CPluginFreeRDP::CreateConnecter(<span class="keyword">const</span> QString &amp;szProtol)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code hl_function" href="classCPluginClient.html#a33d235f502024a800f2fb12a65487f7c">Id</a>() == szProtol)</div>
<div class="line">    {   </div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="classCConnecterFreeRDP.html">CConnecterFreeRDP</a>(<span class="keyword">this</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line">}</div>
<div class="ttc" id="aclassCConnecterFreeRDP_html"><div class="ttname"><a href="classCConnecterFreeRDP.html">CConnecterFreeRDP</a></div><div class="ttdef"><b>Definition:</b> <a href="ConnecterFreeRDP_8h_source.html#l00011">ConnecterFreeRDP.h:12</a></div></div>
<div class="ttc" id="aclassCConnecter_html"><div class="ttname"><a href="classCConnecter.html">CConnecter</a></div><div class="ttdoc">描述连接者应用接口。</div><div class="ttdef"><b>Definition:</b> <a href="Connecter_8h_source.html#l00060">Connecter.h:61</a></div></div>
<div class="ttc" id="aclassCPluginClient_html_a33d235f502024a800f2fb12a65487f7c"><div class="ttname"><a href="classCPluginClient.html#a33d235f502024a800f2fb12a65487f7c">CPluginClient::Id</a></div><div class="ttdeci">virtual const QString Id() const</div><div class="ttdoc">ID. Default: Protol() + &quot;:&quot; + Name()</div><div class="ttdef"><b>Definition:</b> <a href="PluginClient_8cpp_source.html#l00032">PluginClient.cpp:32</a></div></div>
<div class="ttc" id="aclassCPluginFreeRDP_html"><div class="ttname"><a href="classCPluginFreeRDP.html">CPluginFreeRDP</a></div><div class="ttdef"><b>Definition:</b> <a href="PluginFreeRDP_8h_source.html#l00010">PluginFreeRDP.h:11</a></div></div>
<div class="ttc" id="aclassCPluginFreeRDP_html_a52fe101cacf00bf7ae21f82d6938d0f7"><div class="ttname"><a href="classCPluginFreeRDP.html#a52fe101cacf00bf7ae21f82d6938d0f7">CPluginFreeRDP::DisplayName</a></div><div class="ttdeci">virtual const QString DisplayName() const override</div><div class="ttdoc">The plugin display name</div><div class="ttdef"><b>Definition:</b> <a href="PluginFreeRDP_8cpp_source.html#l00031">PluginFreeRDP.cpp:31</a></div></div>
<div class="ttc" id="aclassCPluginFreeRDP_html_ab01d6296978fe8bcfcc9c656b521156e"><div class="ttname"><a href="classCPluginFreeRDP.html#ab01d6296978fe8bcfcc9c656b521156e">CPluginFreeRDP::Name</a></div><div class="ttdeci">virtual const QString Name() const override</div><div class="ttdoc">插件名，这个名一定要与工程名(${PROJECT_NAME})相同。 翻译文件(${PROJECT_NAME}_*.ts)）名与其相关。</div><div class="ttdef"><b>Definition:</b> <a href="PluginFreeRDP_8cpp_source.html#l00026">PluginFreeRDP.cpp:26</a></div></div>
<div class="ttc" id="aclassCPluginFreeRDP_html_abe5e7e5308d6426c453e1c6276feeb49"><div class="ttname"><a href="classCPluginFreeRDP.html#abe5e7e5308d6426c453e1c6276feeb49">CPluginFreeRDP::Description</a></div><div class="ttdeci">virtual const QString Description() const override</div><div class="ttdoc">Plugin description</div><div class="ttdef"><b>Definition:</b> <a href="PluginFreeRDP_8cpp_source.html#l00036">PluginFreeRDP.cpp:36</a></div></div>
<div class="ttc" id="aclassCPluginFreeRDP_html_adc8f72efbc4b1281e02c1662de6f35d5"><div class="ttname"><a href="classCPluginFreeRDP.html#adc8f72efbc4b1281e02c1662de6f35d5">CPluginFreeRDP::Protocol</a></div><div class="ttdeci">virtual const QString Protocol() const override</div><div class="ttdoc">Plugin Protocol</div><div class="ttdef"><b>Definition:</b> <a href="PluginFreeRDP_8cpp_source.html#l00041">PluginFreeRDP.cpp:41</a></div></div>
</div><!-- fragment --></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>如果非阻塞线程模型。一个后台线程处理多个连接。连接是非阻塞的。 例如 RabbitVNC<ul>
<li>从 <a class="el" href="classCPluginClientThread.html" title="它默认启动一个后台线程。 它与 CConnecterDesktop 一起可实现一个后台线程处理多个远程桌面连接。">CPluginClientThread</a> 派生插件。例如： <a class="el" href="classCPluginRabbitVNC.html">CPluginRabbitVNC</a><ul>
<li>在类声明中实现Qt接口: <div class="fragment"><div class="line">    Q_INTERFACES(<a class="code hl_class" href="classCPluginClient.html">CPluginClient</a>)</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#if (QT_VERSION &gt;= QT_VERSION_CHECK(5, 0, 0))</span></div>
<div class="line">    Q_PLUGIN_METADATA(IID CPluginClient_iid)</div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --></li>
<li>在构造函数中初始化操作。例如：初始化资源等 <div class="fragment"><div class="line"> </div>
<div class="line">    <span class="comment">//rfb::SecurityClient::setDefaults();</span></div>
<div class="line">    <span class="keywordflow">if</span>(!initlog)</div>
<div class="line">    {</div>
<div class="line">        rfb::initStdIOLoggers();</div>
<div class="line"> </div>
<div class="line">        QString szFile = RabbitCommon::CDir::Instance()-&gt;GetDirApplication()</div>
<div class="line">                + QDir::separator()</div>
<div class="line">                + <span class="stringliteral">&quot;vncviewer.log&quot;</span>;</div>
<div class="line">        rfb::initFileLogger(szFile.toStdString().c_str());</div>
<div class="line"> </div>
<div class="line">        rfb::LogWriter::setLogParams(<span class="stringliteral">&quot;*:stderr:100&quot;</span>);</div>
<div class="line">        initlog = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
</div><!-- fragment --></li>
<li>在析构函数中释放资源。</li>
<li>实现属性、函数<ul>
<li>插件名：必须与工程名（翻译资源文件名[.ts]）相同。 例如： <a class="el" href="classCPluginRabbitVNC.html#ab3617eca6762278680cd039f66a47a60">CPluginRabbitVNC::Name()</a> <div class="fragment"><div class="line"><span class="comment">// Author: Kang Lin &lt;kl222@126.com&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;PluginRabbitVNC.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;RabbitCommonDir.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;ConnecterRabbitVNC.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;rfb/LogWriter.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;rfb/Logger_stdio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;QApplication&gt;</span></div>
<div class="line"> </div>
<div class="line">Q_LOGGING_CATEGORY(RabbitVNC, <span class="stringliteral">&quot;VNC.Rabbit&quot;</span>)</div>
<div class="line"> </div>
<div class="line">static <span class="keywordtype">bool</span> initlog = false;</div>
<div class="line"><a class="code hl_class" href="classCPluginRabbitVNC.html">CPluginRabbitVNC</a>::<a class="code hl_class" href="classCPluginRabbitVNC.html">CPluginRabbitVNC</a>(QObject *parent)</div>
<div class="line">    : <a class="code hl_class" href="classCPluginClientThread.html">CPluginClientThread</a>(parent)</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//rfb::SecurityClient::setDefaults();</span></div>
<div class="line">    <span class="keywordflow">if</span>(!initlog)</div>
<div class="line">    {</div>
<div class="line">        rfb::initStdIOLoggers();</div>
<div class="line"> </div>
<div class="line">        QString szFile = RabbitCommon::CDir::Instance()-&gt;GetDirApplication()</div>
<div class="line">                + QDir::separator()</div>
<div class="line">                + <span class="stringliteral">&quot;vncviewer.log&quot;</span>;</div>
<div class="line">        rfb::initFileLogger(szFile.toStdString().c_str());</div>
<div class="line"> </div>
<div class="line">        rfb::LogWriter::setLogParams(<span class="stringliteral">&quot;*:stderr:100&quot;</span>);</div>
<div class="line">        initlog = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="classCPluginRabbitVNC.html#a79b48e0c0be136a13ebe08d140e1ab30">CPluginRabbitVNC::~CPluginRabbitVNC</a>()</div>
<div class="line">{</div>
<div class="line">    qDebug(RabbitVNC) &lt;&lt; <span class="stringliteral">&quot;CPluginRabbitVnc::~CPluginRabbitVnc()&quot;</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> QString <a class="code hl_function" href="classCPluginRabbitVNC.html#ab3617eca6762278680cd039f66a47a60">CPluginRabbitVNC::Name</a>()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line">    <span class="keywordflow">return</span> <span class="stringliteral">&quot;RabbitVNC&quot;</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> QString <a class="code hl_function" href="classCPluginRabbitVNC.html#a45531739a9e243a6e43f751a24583f1b">CPluginRabbitVNC::DisplayName</a>()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line">    <span class="keywordflow">return</span> tr(<span class="stringliteral">&quot;RabbitVNC&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> QString <a class="code hl_function" href="classCPluginRabbitVNC.html#af7954a71a66e79a86e8a45b56de6ea1e">CPluginRabbitVNC::Description</a>()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line">    <span class="keywordflow">return</span> tr(<span class="stringliteral">&quot;VNC(Virtual Network Console): Access remote desktops such as unix/linux, windows, etc.&quot;</span>) + <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">            + tr(<span class="stringliteral">&quot;VNC is a set of programs using the RFB (Remote Frame Buffer) protocol.&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> QString <a class="code hl_function" href="classCPluginRabbitVNC.html#a9ffd446dd0c7ca602df588aea438840e">CPluginRabbitVNC::Protocol</a>()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line">    <span class="keywordflow">return</span> <span class="stringliteral">&quot;RFB&quot;</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="classCConnecterDesktop.html">CConnecterDesktop</a> *<a class="code hl_function" href="classCPluginRabbitVNC.html#a3f4eb48007fc551f7630cd5eeddd97a7">CPluginRabbitVNC::OnCreateConnecter</a>(<span class="keyword">const</span> QString &amp;szProtol)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code hl_function" href="classCPluginClient.html#a33d235f502024a800f2fb12a65487f7c">Id</a>() == szProtol)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code hl_class" href="classCConnecterRabbitVNC.html">CConnecterRabbitVNC</a>(<span class="keyword">this</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> QIcon CPluginRabbitVNC::Icon()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line">    <span class="keywordflow">return</span> QIcon::fromTheme(<span class="stringliteral">&quot;network-wired&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="aclassCConnecterDesktop_html"><div class="ttname"><a href="classCConnecterDesktop.html">CConnecterDesktop</a></div><div class="ttdoc">它仅实现 Qt 事件(非阻塞)</div><div class="ttdef"><b>Definition:</b> <a href="ConnecterDesktop_8h_source.html#l00026">ConnecterDesktop.h:27</a></div></div>
<div class="ttc" id="aclassCConnecterRabbitVNC_html"><div class="ttname"><a href="classCConnecterRabbitVNC.html">CConnecterRabbitVNC</a></div><div class="ttdef"><b>Definition:</b> <a href="ConnecterRabbitVNC_8h_source.html#l00010">ConnecterRabbitVNC.h:11</a></div></div>
<div class="ttc" id="aclassCPluginClientThread_html"><div class="ttname"><a href="classCPluginClientThread.html">CPluginClientThread</a></div><div class="ttdoc">它默认启动一个后台线程。 它与 CConnecterDesktop 一起可实现一个后台线程处理多个远程桌面连接。</div><div class="ttdef"><b>Definition:</b> <a href="PluginClientThread_8h_source.html#l00026">PluginClientThread.h:27</a></div></div>
<div class="ttc" id="aclassCPluginRabbitVNC_html"><div class="ttname"><a href="classCPluginRabbitVNC.html">CPluginRabbitVNC</a></div><div class="ttdef"><b>Definition:</b> <a href="PluginRabbitVNC_8h_source.html#l00011">PluginRabbitVNC.h:12</a></div></div>
<div class="ttc" id="aclassCPluginRabbitVNC_html_a3f4eb48007fc551f7630cd5eeddd97a7"><div class="ttname"><a href="classCPluginRabbitVNC.html#a3f4eb48007fc551f7630cd5eeddd97a7">CPluginRabbitVNC::OnCreateConnecter</a></div><div class="ttdeci">virtual CConnecterDesktop * OnCreateConnecter(const QString &amp;szProtol) override</div><div class="ttdoc">Create Connecter</div><div class="ttdef"><b>Definition:</b> <a href="PluginRabbitVNC_8cpp_source.html#l00063">PluginRabbitVNC.cpp:63</a></div></div>
<div class="ttc" id="aclassCPluginRabbitVNC_html_a45531739a9e243a6e43f751a24583f1b"><div class="ttname"><a href="classCPluginRabbitVNC.html#a45531739a9e243a6e43f751a24583f1b">CPluginRabbitVNC::DisplayName</a></div><div class="ttdeci">virtual const QString DisplayName() const override</div><div class="ttdoc">The plugin display name</div><div class="ttdef"><b>Definition:</b> <a href="PluginRabbitVNC_8cpp_source.html#l00047">PluginRabbitVNC.cpp:47</a></div></div>
<div class="ttc" id="aclassCPluginRabbitVNC_html_a79b48e0c0be136a13ebe08d140e1ab30"><div class="ttname"><a href="classCPluginRabbitVNC.html#a79b48e0c0be136a13ebe08d140e1ab30">CPluginRabbitVNC::~CPluginRabbitVNC</a></div><div class="ttdeci">virtual ~CPluginRabbitVNC() override</div><div class="ttdef"><b>Definition:</b> <a href="PluginRabbitVNC_8cpp_source.html#l00035">PluginRabbitVNC.cpp:35</a></div></div>
<div class="ttc" id="aclassCPluginRabbitVNC_html_a9ffd446dd0c7ca602df588aea438840e"><div class="ttname"><a href="classCPluginRabbitVNC.html#a9ffd446dd0c7ca602df588aea438840e">CPluginRabbitVNC::Protocol</a></div><div class="ttdeci">virtual const QString Protocol() const override</div><div class="ttdoc">Plugin Protocol</div><div class="ttdef"><b>Definition:</b> <a href="PluginRabbitVNC_8cpp_source.html#l00058">PluginRabbitVNC.cpp:58</a></div></div>
<div class="ttc" id="aclassCPluginRabbitVNC_html_ab3617eca6762278680cd039f66a47a60"><div class="ttname"><a href="classCPluginRabbitVNC.html#ab3617eca6762278680cd039f66a47a60">CPluginRabbitVNC::Name</a></div><div class="ttdeci">virtual const QString Name() const override</div><div class="ttdoc">插件名，这个名一定要与工程名(${PROJECT_NAME})相同。 翻译文件(${PROJECT_NAME}_*.ts)）名与其相关。</div><div class="ttdef"><b>Definition:</b> <a href="PluginRabbitVNC_8cpp_source.html#l00042">PluginRabbitVNC.cpp:42</a></div></div>
<div class="ttc" id="aclassCPluginRabbitVNC_html_af7954a71a66e79a86e8a45b56de6ea1e"><div class="ttname"><a href="classCPluginRabbitVNC.html#af7954a71a66e79a86e8a45b56de6ea1e">CPluginRabbitVNC::Description</a></div><div class="ttdeci">virtual const QString Description() const override</div><div class="ttdoc">Plugin description</div><div class="ttdef"><b>Definition:</b> <a href="PluginRabbitVNC_8cpp_source.html#l00052">PluginRabbitVNC.cpp:52</a></div></div>
</div><!-- fragment --></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>实现连接者接口 <a class="el" href="classCConnecter.html">CConnecter</a> 。<ul>
<li>实现远程桌面<ul>
<li>如果是阻塞线程模型。实现一个后台线程处理一个远程连接，连接是阻塞的。 可以从 <a class="el" href="classCConnecterDesktopThread.html">CConnecterDesktopThread</a> 派生。例如：<a class="el" href="classCConnecterFreeRDP.html">CConnecterFreeRDP</a> <div class="image">
<object type="image/svg+xml" data="PluginClientBlockSequenceDiagram.svg" style="pointer-events: none;"></object>
</div>
</li>
<li>如果非阻塞线程模型。实现一个后台线程处理多个远程连接，连接是非阻塞的。 可以从 <a class="el" href="classCConnecterDesktop.html">CConnecterDesktop</a> 派生。例如：<a class="el" href="classCConnecterRabbitVNC.html">CConnecterRabbitVNC</a> <div class="image">
<object type="image/svg+xml" data="PluginClientNoBlockSequenDiagram.svg" style="pointer-events: none;"></object>
</div>
</li>
</ul>
</li>
<li>实现远程控制台，可以从 <a class="el" href="classCConnecterTerminal.html">CConnecterTerminal</a> 派生</li>
<li>如果上面两个不能满足你的需要，你可以直接从 <a class="el" href="classCConnecter.html">CConnecter</a> 派生</li>
</ul>
</li>
<li>实现具体的连接，从 <a class="el" href="classCConnect.html">CConnect</a> 派生 。例如：<a class="el" href="classCConnectFreeRDP.html">CConnectFreeRDP</a> </li>
</ul>
</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
